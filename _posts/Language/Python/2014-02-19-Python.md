---
layout: post
title: Python入门
category: 语言 
tags: python
---

#### 如何查看文档
* help(urllib)
* http://docs.python.org/2/py-modindex.html
#### python模块是如何import的
* 从sys.path中找模块，编译成.pyc(若能找到最新的.pyc则直接加载), 然后加载

#### 访问方法堆栈
```
import traceback 
#打印
import pprint
pprint.pprint(traceback.extract_stack())

```

#### 编码
```
# 为了输入中文，声明文件编码，默认Latin-1
#! -*- coding:utf-8 -*-

s = 'ssss'
# 查看s的编码
import chardet
chardet.detect(s)

# 指定字符串编码
s = u'aaaa'

# 查看系统编码
import sys
sys.getdefaultencoding()
sys.setdefaultencoding('utf-8')？？？

# 修改s的编码
s.encode('utf8')
```

#### File处理
##### download
* 文件下载的时候，文件名中文乱码问题
* 文件下载的时候，文件名带空格，从空格处截断问题
```
不同浏览器和操作系统待测试～～～linux+ff+chrome==ok
        if file and os.path.exists(file.path):
            f = open(file.path, "r")
            self.set_header ('Content-Type', file.content_type)
            '''header里面filename为中文编码问题，filename带空格截断问题'''
            user_agent = self.request.headers['User-Agent'] if 'User-Agent' in self.request.headers else ''
            print self.request.headers['User-Agent']
            if 'MSIE' in user_agent:
                self.set_header ('Content-Disposition', 'attachment; filename='+file.filename.encode('gb18030'))
            elif 'safari' in user_agent:
                self.set_header ('Content-Disposition', 'attachment; filename='+file.filename)
            else:
                self.set_header ('Content-Disposition', 'attachment; filename="'+file.filename.encode('utf8')+'"')
            self.write(f.read())
```

